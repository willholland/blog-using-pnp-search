<content id="data-content">
    <style>
        /* Assign the correct size % ratio according to the number of wanted cards on a single row. We use flexbox instead of static grid to deal with SharePoint canvas sections*/

        .template--card {
            flex-grow: 1;
            flex-shrink: 1;
            min-width: 206px;
            /* Min width of the Office UI Fabric document card */
            flex-basis: 33%;
        }

        .cardContainer {
            background-color: grey;
            padding: 5px;
            border: 2px solid black;
            height: 250px;
        }
    </style>

    <div class="template">

        {{#if @root.properties.showSelectedFilters}}
        <pnp-selectedfilters data-filters="{{JSONstringify filters.selectedFilters 2}}"
            data-filters-configuration="{{JSONstringify filters.filtersConfiguration 2}}"
            data-instance-id="{{filters.instanceId}}" data-operator="{{filters.filterOperator}}"
            data-theme-variant="{{JSONstringify @root.theme}}">
        </pnp-selectedfilters>
        {{/if}} {{#if @root.properties.showResultsCount}}
        <div class="template--resultCount">
            <label class="ms-fontWeight-semibold">{{getCountMessage @root.data.totalItemsCount
                @root.inputQueryText}}</label>
        </div>
        {{/if}}

        <div class="template--cardContainer">
            {{#each data.items as |item|}} {{#> resultTypes item=item}}
            <div class="template--card">
                <div class="cardContainer">
                    <div class="ac-textBlock"
                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 26px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 34.58px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">{{slot item @root.slots.Title}}
                            ({{slot item @root.slots.Platform}})</p>
                    </div>
                    <div class="ac-horizontal-separator" aria-hidden="true"
                        style="height: 8px; overflow: hidden; flex: 0 0 auto; display: flex; margin-right: 0px; margin-left: 0px;">
                    </div>
                    <div class="ac-columnSet"
                        style="display: flex; justify-content: flex-start; box-sizing: border-box; flex: 0 0 auto; padding: 0px; margin: 0px;">
                        <div class="ac-container"
                            style="display: flex; flex-direction: column; justify-content: flex-start; box-sizing: border-box; min-width: 0px; flex: 0 1 auto; padding: 0px; margin: 0px;">
                            <div
                                style="display: flex; align-items: flex-start; justify-content: flex-start; box-sizing: border-box; flex: 0 0 auto;">
                                <img class="ac-image" src="{{getUrlField (slot item @root.slots.IMGURL) 'URL'}}"
                                    style="min-width: 0px; width: 80px; max-height: 100%;">
                            </div>
                        </div>
                        <div class="ac-vertical-separator" aria-hidden="true"
                            style="width: 8px; overflow: hidden; flex: 0 0 auto; display: flex;"></div>
                        <div class="ac-container"
                            style="display: flex; flex-direction: column; justify-content: flex-start; box-sizing: border-box; min-width: 0px; flex: 1 1 50px; padding: 0px; margin: 0px;">
                            <div class="ac-columnSet"
                                style="display: flex; justify-content: flex-start; box-sizing: border-box; flex: 0 0 auto; padding: 0px; margin: 0px;">
                                <div class="ac-container"
                                    style="display: flex; flex-direction: column; justify-content: flex-start; box-sizing: border-box; min-width: 0px; flex: 1 1 50px; padding: 0px; margin: 0px;">
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(111, 111, 111); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">Ranking: #{{toFixed
                                            (slot item @root.slots.Rank) 0}}</p>
                                    </div>
                                </div>
                                <div class="ac-vertical-separator" aria-hidden="true"
                                    style="width: 8px; overflow: hidden; flex: 0 0 auto; display: flex;"></div>
                                <div class="ac-container"
                                    style="display: flex; flex-direction: column; justify-content: flex-start; box-sizing: border-box; min-width: 0px; flex: 1 1 50px; padding: 0px; margin: 0px;">
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">Year: {{toFixed
                                            (slot item @root.slots.Year) 0}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="ac-horizontal-separator" aria-hidden="true"
                                style="height: 8px; overflow: hidden; flex: 0 0 auto; display: flex; margin-right: 0px; margin-left: 0px;">
                            </div>
                            <div class="ac-columnSet"
                                style="display: flex; justify-content: flex-start; box-sizing: border-box; flex: 0 0 auto; padding: 0px; margin: 0px;">
                                <div class="ac-container"
                                    style="display: flex; flex-direction: column; justify-content: flex-start; box-sizing: border-box; min-width: 0px; flex: 1 1 50px; padding: 0px; margin: 0px;">
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">Publisher</p>
                                    </div>
                                    <div class="ac-horizontal-separator" aria-hidden="true"
                                        style="height: 8px; overflow: hidden; flex: 0 0 auto; margin-right: 0px; margin-left: 0px;">
                                    </div>
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">Developer</p>
                                    </div>
                                    <div class="ac-horizontal-separator" aria-hidden="true"
                                        style="height: 8px; overflow: hidden; flex: 0 0 auto; margin-right: 0px; margin-left: 0px;">
                                    </div>
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">Genre</p>
                                    </div>
                                    <div class="ac-horizontal-separator" aria-hidden="true"
                                        style="height: 8px; overflow: hidden; flex: 0 0 auto; margin-right: 0px; margin-left: 0px;">
                                    </div>
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">Rating</p>
                                    </div>
                                </div>
                                <div class="ac-vertical-separator" aria-hidden="true"
                                    style="width: 8px; overflow: hidden; flex: 0 0 auto; display: flex;"></div>
                                <div class="ac-container"
                                    style="display: flex; flex-direction: column; justify-content: flex-start; box-sizing: border-box; min-width: 0px; flex: 1 1 50px; padding: 0px; margin: 0px;">
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; white-space: nowrap; text-overflow: ellipsis; box-sizing: border-box; flex: 0 0 auto;">
                                        <p
                                            style="margin-top: 0px; width: 100%; overflow: hidden; text-overflow: ellipsis; margin-bottom: 0px;">
                                            {{slot item @root.slots.Publisher}}
                                        </p>
                                    </div>
                                    <div class="ac-horizontal-separator" aria-hidden="true"
                                        style="height: 8px; overflow: hidden; flex: 0 0 auto; margin-right: 0px; margin-left: 0px;">
                                    </div>
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; white-space: nowrap; text-overflow: ellipsis; box-sizing: border-box; flex: 0 0 auto;">
                                        <p
                                            style="margin-top: 0px; width: 100%; overflow: hidden; text-overflow: ellipsis; margin-bottom: 0px;">
                                            {{slot item @root.slots.Developer}}</p>
                                    </div>
                                    <div class="ac-horizontal-separator" aria-hidden="true"
                                        style="height: 8px; overflow: hidden; flex: 0 0 auto; margin-right: 0px; margin-left: 0px;">
                                    </div>
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">{{slot item
                                            @root.slots.Genre}}</p>
                                    </div>
                                    <div class="ac-horizontal-separator" aria-hidden="true"
                                        style="height: 8px; overflow: hidden; flex: 0 0 auto; margin-right: 0px; margin-left: 0px;">
                                    </div>
                                    <div class="ac-textBlock"
                                        style="overflow: hidden; font-family: Calibri, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-weight: 400; text-align: left; line-height: 18.62px; overflow-wrap: break-word; box-sizing: border-box; flex: 0 0 auto;">
                                        <p style="margin-top: 0px; width: 100%; margin-bottom: 0px;">{{slot item
                                            @root.slots.Rating}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{/resultTypes}} {{/each}}

            <!-- Generate fake items to correctly align cards on rows using flexbox -->
            {{#times @root.properties.layoutProperties.preferedCardNumberPerRow}}
            <pnp-documentcard class="template--card" data-ui-test-id="fakeCard"
                data-theme-variant="{{JSONstringify @root.theme}}" style="visibility:hidden;height: 0;padding: 0">
            </pnp-documentcard>
            {{/times}}
        </div>

        {{#if @root.properties.paging.showPaging}} {{#gt @root.data.totalItemsCount
        @root.properties.paging.itemsCountPerPage}}
        <pnp-pagination data-total-items="{{@root.data.totalItemsCount}}"
            data-hide-first-last-pages="{{@root.properties.paging.hideFirstLastPages}}"
            data-hide-disabled="{{@root.properties.paging.hideDisabled}}"
            data-hide-navigation="{{@root.properties.paging.hideNavigation}}"
            data-range="{{@root.properties.paging.pagingRange}}"
            data-items-count-per-page="{{@root.properties.paging.itemsCountPerPage}}"
            data-current-page-number="{{@root.paging.currentPageNumber}}"
            data-page-links="{{JSONstringify @root.data.paging.links}}"
            data-theme-variant="{{JSONstringify @root.theme}}">
        </pnp-pagination>
        {{/gt}} {{/if}}

    </div>

</content>

<content id="placeholder-content">

    <style>
        /* Assign the correct size % ratio according to the number of wanted cards on a single row. We use flexbox instead of static grid to deal with SharePoint canvas sections*/

        .template--card {
            flex-grow: 1;
            flex-shrink: 1;
            min-width: 206px;

            /* Min width of the Office UI Fabric document card */
            flex-basis: {{ @root.properties.layoutProperties.columnSizePercentage }}%;
        }
    </style>

    <div class="placeholder">

        {{!-- #if showResultsCount --}}
        <div class="template--resultCount">
            <span class="placeholder--shimmer placeholder--line" style="width: 20%"></span>
        </div {{!-- /if --}} <div class="template--cardContainer">

        {{#times @root.properties.paging.itemsCountPerPage}}
        <pnp-documentcardshimmers class="template--card" data-ui-test-id="fakeCard"
            data-theme-variant="{{JSONstringify @root.theme}}"
            data-is-compact="{{@root.properties.layoutProperties.isCompact}}">
        </pnp-documentcardshimmers>
        {{/times}}

        <!-- Generate fake items to correctly align cards on rows using flexbox -->
        {{#times @root.properties.layoutProperties.preferedCardNumberPerRow}}
        <pnp-documentcard class="template--card" data-ui-test-id="fakeCard"
            data-theme-variant="{{JSONstringify @root.theme}}" style="visibility:hidden;height: 0;padding: 0">
        </pnp-documentcard>
        {{/times}}
    </div>

    </div>
</content>